#!/usr/bin/env bash

# Set DISPLAY to :0 if not already set
export DISPLAY="${DISPLAY:-:0}"

# --ao=alsa is to remove warning about pipewire (https://github.com/mpv-player/mpv/issues/11790#issuecomment-2729530240)
# try_load_conf()] can't load config client.conf: No such file or directory
MPV_EXEC="$(command -v mpv) --vo=gpu,drm --ao=alsa"
MPV_FORMAT='bestvideo[height<=720][ext=mp4]+bestaudio[ext=m4a]/best[height<=720][ext=mp4]'

$MPV_EXEC --ytdl-format="$MPV_FORMAT" "$@"
